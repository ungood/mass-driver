<xml xmlns="https://developers.google.com/blockly/xml"><comment id="uDJC:j:zwn^))lq=Zdw." data="0" x="1247" y="-209" h="160" w="480">Mock Mass Driver
let coil2 = new Coil(new Magnet(2), new TouchSensor(TouchPin.P2));
let coil1 = new Coil(new Magnet(1), new TouchSensor(TouchPin.P1), coil2);
let coil0 = new Coil(new Magnet(0), new TouchSensor(TouchPin.P0), coil1);</comment><block type="pxt-on-start" id="j/AkA76/a-{m15{d*9%1" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" id="v3}k@w*.Dk?xO{NsO{M/" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface Magnet{" line1="    readonly safetyDelay: number;" line2="    on(): void;" line3="    off(): void;" line4="}" numlines="5"></mutation><next><block type="typescript_statement" id="E(%a#`b[nGh(].at]dIv" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class Electromagnet implements Magnet {" line1="    readonly pin : DigitalPin;" line2="    readonly safetyDelay: number = 250;" line3="" line4="    constructor(pin : DigitalPin) {" line5="        this.pin = pin;" line6="    }" line7="" line8="    public on() {" line9="        pins.digitalWritePin(this.pin, 1);" line10="    }" line11="" line12="    public off() {" line13="        pins.digitalWritePin(this.pin, 0);" line14="    }" line15="}" numlines="16"></mutation><next><block type="typescript_statement" id="sOjpjO?Q:14{3;eIU^@U" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class TestMagnet implements Magnet {" line1="    readonly number: number;" line2="    readonly safetyDelay: number = 5000;" line3="" line4="    constructor(number: number) {" line5="        this.number = number;" line6="    }" line7="" line8="    public on() {" line9="        led.plot(this.number, 2);" line10="    }" line11="    " line12="    public off() {" line13="        led.unplot(this.number, 2);" line14="    }" line15="}" numlines="16"></mutation><next><block type="typescript_statement" id="U]D14SX*F4.*(tv}Pf0W" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface DigitalSensor {" line1="    onTriggered(body: () =&gt; void): void;" line2="    disable(): void;" line3="}" numlines="4"></mutation><next><block type="typescript_statement" id="^f)v|KDmBQ7dGs97+^x," editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class TouchSensor implements DigitalSensor {" line1="    readonly pin: TouchPin;" line2="" line3="    constructor(pin: TouchPin) {" line4="        this.pin = pin;" line5="    }" line6="    " line7="    public onTriggered(body: () =&gt; void) {" line8="        input.onPinPressed(this.pin, body);" line9="    }" line10="    " line11="    public disable() {" line12="        input.onPinPressed(this.pin, () =&gt; {});" line13="    }" line14="}" numlines="15"></mutation><next><block type="typescript_statement" id="wy{[O,Y}317G?bu:+(@A" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class HallSensor implements DigitalSensor {" line1="    readonly pin: DigitalPin;" line2="" line3="    constructor(pin: DigitalPin) {" line4="        this.pin = pin;" line5="        pins.setPull(this.pin, PinPullMode.PullUp);" line6="    }" line7="" line8="    public onTriggered(body: () =&gt; void) {" line9="        pins.onPulsed(this.pin, PulseValue.Low, body);" line10="    }" line11="" line12="    public disable() {" line13="        pins.onPulsed(this.pin, PulseValue.High, () =&gt; {});" line14="    }" line15="}" numlines="16"></mutation><next><block type="typescript_statement" id="tTY2/.hlLl.uM,$iF!@Z" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class Coil {" line1="    readonly magnet: Magnet;" line2="    readonly sensor: DigitalSensor;" line3="    readonly nextCoil: Coil;" line4="" line5="    constructor(magnet: Magnet, sensor: DigitalSensor, nextCoil: Coil = null) {" line6="        this.magnet = magnet;" line7="        this.sensor = sensor;" line8="        this.nextCoil = nextCoil;" line9="    }" line10="" line11="    public on() {" line12="        this.sensor.onTriggered(() =&gt; this.off());" line13="        this.magnet.on();" line14="        basic.pause(this.magnet.safetyDelay);" line15="        this.magnet.off();" line16="    }" line17="" line18="    public off() {" line19="        this.sensor.disable();" line20="        this.magnet.off();" line21="" line22="        if (this.nextCoil) {" line23="            this.nextCoil.on();" line24="        }" line25="    }" line26="}" numlines="27"></mutation><next><block type="device_led_enable" id="P*U(KmA+-9tI{NVI-ZV7"><data>0</data><value name="on"><shadow type="logic_boolean" id="|9,;zHK(nkVO,nAY+KE["><field name="BOOL">FALSE</field></shadow></value><next><block type="music_set_built_in_speaker_enable" id="u#C./8r$xoxoyL$R`2ba"><value name="enabled"><shadow type="toggleOnOff" id="3*SCmslkeaSKnbF*htnP"><field name="on">true</field></shadow></value><next><block type="typescript_statement" id="c5Pu~_TyE2aex/.Y=Awd" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let coil2 = new Coil(" line1="    new Electromagnet(DigitalPin.P8)," line2="    new HallSensor(DigitalPin.P2)" line3=");" numlines="4" declaredvars="coil2"></mutation><next><block type="typescript_statement" id="e!sja|}CU^iIH0O}~4oL" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let coil1 = new Coil(" line1="    new Electromagnet(DigitalPin.P7)," line2="    new HallSensor(DigitalPin.P1)," line3="    coil2" line4=");" numlines="5" declaredvars="coil1"></mutation><next><block type="typescript_statement" id="DUM?T)vds)[3w.qiD_Le" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let coil0 = new Coil(" line1="    new Electromagnet(DigitalPin.P6)," line2="    new HallSensor(DigitalPin.P0)," line3="    coil1" line4=");" numlines="5" declaredvars="coil0"></mutation><next><block type="typescript_statement" id="C6,dR)|1*![$W#;}qJ%9" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="input.onLogoEvent(TouchButtonEvent.Pressed, start);" numlines="1"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="caY_{3zZJCFcE)Fq%LPG" x="855" y="20"><mutation name="start" functionid="x~5OY]:cA=8}T=LGr}@?"></mutation><field name="function_name">start</field><statement name="STACK"><block type="soundExpression_playSoundEffect" id="bBP6uXgJ/cNoJFY^oRnd"><field name="mode">SoundExpressionPlayMode.UntilDone</field><value name="sound"><shadow type="soundExpression_builtinSoundEffect" id="V`kZw9,c^/`xomd?Bmut"><field name="soundExpression">soundExpression.mysterious</field></shadow></value></block></statement></block></xml>